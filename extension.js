(()=>{var e,t,n,r={9430:(e,t,n)=>{"use strict";const r=n(9810),o=Symbol("max"),i=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),c=Symbol("maxAge"),l=Symbol("dispose"),h=Symbol("noDisposeOnSet"),u=Symbol("lruList"),f=Symbol("cache"),p=Symbol("updateAgeOnGet"),d=()=>1,m=(e,t,n)=>{const r=e[f].get(t);if(r){const t=r.value;if(g(e,t)){if(v(e,r),!e[a])return}else n&&(e[p]&&(r.value.now=Date.now()),e[u].unshiftNode(r));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[c]&&n>e[c]},w=e=>{if(e[i]>e[o])for(let t=e[u].tail;e[i]>e[o]&&null!==t;){const n=t.prev;v(e,t),t=n}},v=(e,t)=>{if(t){const n=t.value;e[l]&&e[l](n.key,n.value),e[i]-=n.length,e[f].delete(n.key),e[u].removeNode(t)}};class E{constructor(e,t,n,r,o){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=o||0}}const $=(e,t,n,r)=>{let o=n.value;g(e,o)&&(v(e,n),e[a]||(o=void 0)),o&&t.call(r,o.value,o.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;const t=e.length||d;if(this[s]="function"!=typeof t?d:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[l]=e.dispose,this[h]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,w(this)}get max(){return this[o]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,w(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=d),e!==this[s]&&(this[s]=e,this[i]=0,this[u].forEach((e=>{e.length=this[s](e.value,e.key),this[i]+=e.length}))),w(this)}get lengthCalculator(){return this[s]}get length(){return this[i]}get itemCount(){return this[u].length}rforEach(e,t){t=t||this;for(let n=this[u].tail;null!==n;){const r=n.prev;$(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[u].head;null!==n;){const r=n.next;$(this,e,n,t),n=r}}keys(){return this[u].toArray().map((e=>e.key))}values(){return this[u].toArray().map((e=>e.value))}reset(){this[l]&&this[u]&&this[u].length&&this[u].forEach((e=>this[l](e.key,e.value))),this[f]=new Map,this[u]=new r,this[i]=0}dump(){return this[u].map((e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[u]}set(e,t,n){if((n=n||this[c])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,a=this[s](t,e);if(this[f].has(e)){if(a>this[o])return v(this,this[f].get(e)),!1;const s=this[f].get(e).value;return this[l]&&(this[h]||this[l](e,s.value)),s.now=r,s.maxAge=n,s.value=t,this[i]+=a-s.length,s.length=a,this.get(e),w(this),!0}const p=new E(e,t,a,r,n);return p.length>this[o]?(this[l]&&this[l](e,t),!1):(this[i]+=p.length,this[u].unshift(p),this[f].set(e,this[u].head),w(this),!0)}has(e){if(!this[f].has(e))return!1;const t=this[f].get(e).value;return!g(this,t)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){const e=this[u].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[f].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],o=r.e||0;if(0===o)this.set(r.k,r.v);else{const e=o-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[f].forEach(((e,t)=>m(this,t,!1)))}}},4182:(e,t,n)=>{const r=Symbol("SemVer ANY");class o{static get ANY(){return r}constructor(e,t){if(t=i(t),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}l("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new h(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(l("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new h(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new u(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new u(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=c(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=c(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||i&&s||a||l}}e.exports=o;const i=n(8346),{re:s,t:a}=n(922),c=n(7394),l=n(1759),h=n(6217),u=n(86)},86:(e,t,n)=>{class r{constructor(e,t){if(t=i(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!d(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&m(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=o.get(t);if(n)return n;const r=this.options.loose,i=r?l[h.HYPHENRANGELOOSE]:l[h.HYPHENRANGE];e=e.replace(i,R(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(l[h.COMPARATORTRIM],u),a("comparator trim",e,l[h.COMPARATORTRIM]),e=(e=(e=e.replace(l[h.TILDETRIM],f)).replace(l[h.CARETTRIM],p)).split(/\s+/).join(" ");const c=r?l[h.COMPARATORLOOSE]:l[h.COMPARATOR],m=e.split(" ").map((e=>w(e,this.options))).join(" ").split(/\s+/).map((e=>k(e,this.options))).filter(this.options.loose?e=>!!e.match(c):()=>!0).map((e=>new s(e,this.options))),g=(m.length,new Map);for(const e of m){if(d(e))return[e];g.set(e.value,e)}g.size>1&&g.has("")&&g.delete("");const v=[...g.values()];return o.set(t,v),v}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some((n=>g(n,t)&&e.set.some((e=>g(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(O(this.set[t],e,this.options))return!0;return!1}}e.exports=r;const o=new(n(9430))({max:1e3}),i=n(8346),s=n(4182),a=n(1759),c=n(6217),{re:l,t:h,comparatorTrimReplace:u,tildeTrimReplace:f,caretTrimReplace:p}=n(922),d=e=>"<0.0.0-0"===e.value,m=e=>""===e.value,g=(e,t)=>{let n=!0;const r=e.slice();let o=r.pop();for(;n&&r.length;)n=r.every((e=>o.intersects(e,t))),o=r.pop();return n},w=(e,t)=>(a("comp",e,t),e=y(e,t),a("caret",e),e=E(e,t),a("tildes",e),e=S(e,t),a("xrange",e),e=T(e,t),a("stars",e),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,E=(e,t)=>e.trim().split(/\s+/).map((e=>$(e,t))).join(" "),$=(e,t)=>{const n=t.loose?l[h.TILDELOOSE]:l[h.TILDE];return e.replace(n,((t,n,r,o,i)=>{let s;return a("tilde",e,t,n,r,o,i),v(n)?s="":v(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:v(o)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:i?(a("replaceTilde pr",i),s=`>=${n}.${r}.${o}-${i} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${o} <${n}.${+r+1}.0-0`,a("tilde return",s),s}))},y=(e,t)=>e.trim().split(/\s+/).map((e=>C(e,t))).join(" "),C=(e,t)=>{a("caret",e,t);const n=t.loose?l[h.CARETLOOSE]:l[h.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,o,i,s)=>{let c;return a("caret",e,t,n,o,i,s),v(n)?c="":v(o)?c=`>=${n}.0.0${r} <${+n+1}.0.0-0`:v(i)?c="0"===n?`>=${n}.${o}.0${r} <${n}.${+o+1}.0-0`:`>=${n}.${o}.0${r} <${+n+1}.0.0-0`:s?(a("replaceCaret pr",s),c="0"===n?"0"===o?`>=${n}.${o}.${i}-${s} <${n}.${o}.${+i+1}-0`:`>=${n}.${o}.${i}-${s} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${i}-${s} <${+n+1}.0.0-0`):(a("no pr"),c="0"===n?"0"===o?`>=${n}.${o}.${i}${r} <${n}.${o}.${+i+1}-0`:`>=${n}.${o}.${i}${r} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${i} <${+n+1}.0.0-0`),a("caret return",c),c}))},S=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>b(e,t))).join(" ")),b=(e,t)=>{e=e.trim();const n=t.loose?l[h.XRANGELOOSE]:l[h.XRANGE];return e.replace(n,((n,r,o,i,s,c)=>{a("xRange",e,n,r,o,i,s,c);const l=v(o),h=l||v(i),u=h||v(s),f=u;return"="===r&&f&&(r=""),c=t.includePrerelease?"-0":"",l?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(h&&(i=0),s=0,">"===r?(r=">=",h?(o=+o+1,i=0,s=0):(i=+i+1,s=0)):"<="===r&&(r="<",h?o=+o+1:i=+i+1),"<"===r&&(c="-0"),n=`${r+o}.${i}.${s}${c}`):h?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:u&&(n=`>=${o}.${i}.0${c} <${o}.${+i+1}.0-0`),a("xRange return",n),n}))},T=(e,t)=>(a("replaceStars",e,t),e.trim().replace(l[h.STAR],"")),k=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?h.GTE0PRE:h.GTE0],"")),R=e=>(t,n,r,o,i,s,a,c,l,h,u,f,p)=>`${n=v(r)?"":v(o)?`>=${r}.0.0${e?"-0":""}`:v(i)?`>=${r}.${o}.0${e?"-0":""}`:s?`>=${n}`:`>=${n}${e?"-0":""}`} ${c=v(l)?"":v(h)?`<${+l+1}.0.0-0`:v(u)?`<${l}.${+h+1}.0-0`:f?`<=${l}.${h}.${u}-${f}`:e?`<${l}.${h}.${+u+1}-0`:`<=${c}`}`.trim(),O=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(a(e[n].semver),e[n].semver!==s.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},6217:(e,t,n)=>{const r=n(1759),{MAX_LENGTH:o,MAX_SAFE_INTEGER:i}=n(5578),{re:s,t:a}=n(922),c=n(8346),{compareIdentifiers:l}=n(6158);class h{constructor(e,t){if(t=c(t),e instanceof h){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof h)){if("string"==typeof e&&e===this.version)return 0;e=new h(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof h||(e=new h(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof h||(e=new h(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return l(n,o)}while(++t)}compareBuild(e){e instanceof h||(e=new h(e,this.options));let t=0;do{const n=this.build[t],o=e.build[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return l(n,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=h},1203:(e,t,n)=>{const r=n(5269);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},7394:(e,t,n)=>{const r=n(5266),o=n(9798),i=n(4556),s=n(274),a=n(8636),c=n(188);e.exports=(e,t,n,l)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,l);case"!=":return o(e,n,l);case">":return i(e,n,l);case">=":return s(e,n,l);case"<":return a(e,n,l);case"<=":return c(e,n,l);default:throw new TypeError(`Invalid operator: ${t}`)}}},3764:(e,t,n)=>{const r=n(6217),o=n(5269),{re:i,t:s}=n(922);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=i[s.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),i[s.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;i[s.COERCERTL].lastIndex=-1}else n=e.match(i[s.COERCE]);return null===n?null:o(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)}},4116:(e,t,n)=>{const r=n(6217);e.exports=(e,t,n)=>{const o=new r(e,n),i=new r(t,n);return o.compare(i)||o.compareBuild(i)}},2142:(e,t,n)=>{const r=n(8249);e.exports=(e,t)=>r(e,t,!0)},8249:(e,t,n)=>{const r=n(6217);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},6457:(e,t,n)=>{const r=n(5269),o=n(5266);e.exports=(e,t)=>{if(o(e,t))return null;{const n=r(e),o=r(t),i=n.prerelease.length||o.prerelease.length,s=i?"pre":"",a=i?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==o[e])return s+e;return a}}},5266:(e,t,n)=>{const r=n(8249);e.exports=(e,t,n)=>0===r(e,t,n)},4556:(e,t,n)=>{const r=n(8249);e.exports=(e,t,n)=>r(e,t,n)>0},274:(e,t,n)=>{const r=n(8249);e.exports=(e,t,n)=>r(e,t,n)>=0},2879:(e,t,n)=>{const r=n(6217);e.exports=(e,t,n,o)=>{"string"==typeof n&&(o=n,n=void 0);try{return new r(e,n).inc(t,o).version}catch(e){return null}}},8636:(e,t,n)=>{const r=n(8249);e.exports=(e,t,n)=>r(e,t,n)<0},188:(e,t,n)=>{const r=n(8249);e.exports=(e,t,n)=>r(e,t,n)<=0},9279:(e,t,n)=>{const r=n(6217);e.exports=(e,t)=>new r(e,t).major},6642:(e,t,n)=>{const r=n(6217);e.exports=(e,t)=>new r(e,t).minor},9798:(e,t,n)=>{const r=n(8249);e.exports=(e,t,n)=>0!==r(e,t,n)},5269:(e,t,n)=>{const{MAX_LENGTH:r}=n(5578),{re:o,t:i}=n(922),s=n(6217),a=n(8346);e.exports=(e,t)=>{if(t=a(t),e instanceof s)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?o[i.LOOSE]:o[i.FULL]).test(e))return null;try{return new s(e,t)}catch(e){return null}}},6928:(e,t,n)=>{const r=n(6217);e.exports=(e,t)=>new r(e,t).patch},333:(e,t,n)=>{const r=n(5269);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},350:(e,t,n)=>{const r=n(8249);e.exports=(e,t,n)=>r(t,e,n)},7591:(e,t,n)=>{const r=n(4116);e.exports=(e,t)=>e.sort(((e,n)=>r(n,e,t)))},8735:(e,t,n)=>{const r=n(86);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},7699:(e,t,n)=>{const r=n(4116);e.exports=(e,t)=>e.sort(((e,n)=>r(e,n,t)))},4298:(e,t,n)=>{const r=n(5269);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},7369:(e,t,n)=>{const r=n(922);e.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n(5578).SEMVER_SPEC_VERSION,SemVer:n(6217),compareIdentifiers:n(6158).compareIdentifiers,rcompareIdentifiers:n(6158).rcompareIdentifiers,parse:n(5269),valid:n(4298),clean:n(1203),inc:n(2879),diff:n(6457),major:n(9279),minor:n(6642),patch:n(6928),prerelease:n(333),compare:n(8249),rcompare:n(350),compareLoose:n(2142),compareBuild:n(4116),sort:n(7699),rsort:n(7591),gt:n(4556),lt:n(8636),eq:n(5266),neq:n(9798),gte:n(274),lte:n(188),cmp:n(7394),coerce:n(3764),Comparator:n(4182),Range:n(86),satisfies:n(8735),toComparators:n(8619),maxSatisfying:n(3795),minSatisfying:n(2812),minVersion:n(8183),validRange:n(4882),outside:n(6578),gtr:n(8020),ltr:n(2119),intersects:n(2312),simplifyRange:n(6380),subset:n(3052)}},5578:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:t,MAX_SAFE_COMPONENT_LENGTH:16}},1759:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},6158:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const r=t.test(e),o=t.test(n);return r&&o&&(e=+e,n=+n),e===n?0:r&&!o?-1:o&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},8346:e=>{const t=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:t.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},922:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r}=n(5578),o=n(1759),i=(t=e.exports={}).re=[],s=t.src=[],a=t.t={};let c=0;const l=(e,t,n)=>{const r=c++;o(r,t),a[e]=r,s[r]=t,i[r]=new RegExp(t,n?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${s[a.NUMERICIDENTIFIER]}|${s[a.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${s[a.NUMERICIDENTIFIERLOOSE]}|${s[a.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${s[a.PRERELEASEIDENTIFIER]}(?:\\.${s[a.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${s[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[a.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${s[a.BUILDIDENTIFIER]}(?:\\.${s[a.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${s[a.MAINVERSION]}${s[a.PRERELEASE]}?${s[a.BUILD]}?`),l("FULL",`^${s[a.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${s[a.MAINVERSIONLOOSE]}${s[a.PRERELEASELOOSE]}?${s[a.BUILD]}?`),l("LOOSE",`^${s[a.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${s[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${s[a.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:${s[a.PRERELEASE]})?${s[a.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:${s[a.PRERELEASELOOSE]})?${s[a.BUILD]}?)?)?`),l("XRANGE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),l("COERCERTL",s[a.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${s[a.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${s[a.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${s[a.LONECARET]}${s[a.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${s[a.LONECARET]}${s[a.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${s[a.GTLT]}\\s*(${s[a.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]}|${s[a.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${s[a.XRANGEPLAIN]})\\s+-\\s+(${s[a.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${s[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[a.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0.0.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},8020:(e,t,n)=>{const r=n(6578);e.exports=(e,t,n)=>r(e,t,">",n)},2312:(e,t,n)=>{const r=n(86);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t))},2119:(e,t,n)=>{const r=n(6578);e.exports=(e,t,n)=>r(e,t,"<",n)},3795:(e,t,n)=>{const r=n(6217),o=n(86);e.exports=(e,t,n)=>{let i=null,s=null,a=null;try{a=new o(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(i&&-1!==s.compare(e)||(i=e,s=new r(i,n)))})),i}},2812:(e,t,n)=>{const r=n(6217),o=n(86);e.exports=(e,t,n)=>{let i=null,s=null,a=null;try{a=new o(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(i&&1!==s.compare(e)||(i=e,s=new r(i,n)))})),i}},8183:(e,t,n)=>{const r=n(6217),o=n(86),i=n(4556);e.exports=(e,t)=>{e=new o(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const o=e.set[t];let s=null;o.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!i(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||n&&!i(n,s)||(n=s)}return n&&e.test(n)?n:null}},6578:(e,t,n)=>{const r=n(6217),o=n(4182),{ANY:i}=o,s=n(86),a=n(8735),c=n(4556),l=n(8636),h=n(188),u=n(274);e.exports=(e,t,n,f)=>{let p,d,m,g,w;switch(e=new r(e,f),t=new s(t,f),n){case">":p=c,d=h,m=l,g=">",w=">=";break;case"<":p=l,d=u,m=c,g="<",w="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,f))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let s=null,a=null;if(r.forEach((e=>{e.semver===i&&(e=new o(">=0.0.0")),s=s||e,a=a||e,p(e.semver,s.semver,f)?s=e:m(e.semver,a.semver,f)&&(a=e)})),s.operator===g||s.operator===w)return!1;if((!a.operator||a.operator===g)&&d(e,a.semver))return!1;if(a.operator===w&&m(e,a.semver))return!1}return!0}},6380:(e,t,n)=>{const r=n(8735),o=n(8249);e.exports=(e,t,n)=>{const i=[];let s=null,a=null;const c=e.sort(((e,t)=>o(e,t,n)));for(const e of c)r(e,t,n)?(a=e,s||(s=e)):(a&&i.push([s,a]),a=null,s=null);s&&i.push([s,null]);const l=[];for(const[e,t]of i)e===t?l.push(e):t||e!==c[0]?t?e===c[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");const h=l.join(" || "),u="string"==typeof t.raw?t.raw:String(t);return h.length<u.length?h:t}},3052:(e,t,n)=>{const r=n(86),o=n(4182),{ANY:i}=o,s=n(8735),a=n(8249),c=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=n.includePrerelease?[new o(">=0.0.0-0")]:[new o(">=0.0.0")]}if(1===t.length&&t[0].semver===i){if(n.includePrerelease)return!0;t=[new o(">=0.0.0")]}const r=new Set;let c,u,f,p,d,m,g;for(const t of e)">"===t.operator||">="===t.operator?c=l(c,t,n):"<"===t.operator||"<="===t.operator?u=h(u,t,n):r.add(t.semver);if(r.size>1)return null;if(c&&u){if(f=a(c.semver,u.semver,n),f>0)return null;if(0===f&&(">="!==c.operator||"<="!==u.operator))return null}for(const e of r){if(c&&!s(e,String(c),n))return null;if(u&&!s(e,String(u),n))return null;for(const r of t)if(!s(e,String(r),n))return!1;return!0}let w=!(!u||n.includePrerelease||!u.semver.prerelease.length)&&u.semver,v=!(!c||n.includePrerelease||!c.semver.prerelease.length)&&c.semver;w&&1===w.prerelease.length&&"<"===u.operator&&0===w.prerelease[0]&&(w=!1);for(const e of t){if(g=g||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,c)if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),">"===e.operator||">="===e.operator){if(p=l(c,e,n),p===e&&p!==c)return!1}else if(">="===c.operator&&!s(c.semver,String(e),n))return!1;if(u)if(w&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===w.major&&e.semver.minor===w.minor&&e.semver.patch===w.patch&&(w=!1),"<"===e.operator||"<="===e.operator){if(d=h(u,e,n),d===e&&d!==u)return!1}else if("<="===u.operator&&!s(u.semver,String(e),n))return!1;if(!e.operator&&(u||c)&&0!==f)return!1}return!(c&&m&&!u&&0!==f||u&&g&&!c&&0!==f||v||w)},l=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let o=!1;e:for(const r of e.set){for(const e of t.set){const t=c(r,e,n);if(o=o||null!==t,t)continue e}if(o)return!1}return!0}},8619:(e,t,n)=>{const r=n(86);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},4882:(e,t,n)=>{const r=n(86);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},4584:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},9810:(e,t,n)=>{"use strict";function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,o=arguments.length;n<o;n++)t.push(arguments[n]);return t}function o(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function i(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,n,r){if(!(this instanceof s))return new s(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=r,r.Node=s,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,o=this.head;null!==o;)n.push(e.call(t,o.value,this)),o=o.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,o=this.tail;null!==o;)n.push(e.call(t,o.value,this)),o=o.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var o=0;null!==r;o++)n=e(n,r.value,o),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var o=this.length-1;null!==r;o--)n=e(n,r.value,o),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<t;o++,i=i.next)n.push(i.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,i=this.tail;null!==i&&o>t;o--)i=i.prev;for(;null!==i&&o>e;o--,i=i.prev)n.push(i.value);return n},r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,o=this.head;null!==o&&r<e;r++)o=o.next;var i,a,c,l,h=[];for(r=0;o&&r<t;r++)h.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),r=0;r<n.length;r++)i=this,a=o,c=n[r],l=void 0,null===(l=a===i.head?new s(c,null,a,i):new s(c,a,a.next,i)).next&&(i.tail=l),null===l.prev&&(i.head=l),i.length++,o=l;return h},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(4584)(r)}catch(e){}},801:(e,t,n)=>{"use strict";n.d(t,{g3:()=>w,ok:()=>k,vj:()=>S,iE:()=>b,G_:()=>g,r0:()=>L,z0:()=>F,O1:()=>$,x3:()=>E,gV:()=>A,rF:()=>C});var r,o=n(7897),i=n(7147);function s(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function a(e){return 10===e||13===e||8232===e||8233===e}function c(e){return e>=48&&e<=57}function l(e,t,n){void 0===n&&(n=r.DEFAULT);var o=function(e,t){void 0===t&&(t=!1);var n=e.length,r=0,o="",i=0,l=16,h=0,u=0,f=0,p=0,d=0;function m(t,n){for(var o=0,i=0;o<t||!n;){var s=e.charCodeAt(r);if(s>=48&&s<=57)i=16*i+s-48;else if(s>=65&&s<=70)i=16*i+s-65+10;else{if(!(s>=97&&s<=102))break;i=16*i+s-97+10}r++,o++}return o<t&&(i=-1),i}function g(){if(o="",d=0,i=r,u=h,p=f,r>=n)return i=n,l=17;var t=e.charCodeAt(r);if(s(t)){do{r++,o+=String.fromCharCode(t),t=e.charCodeAt(r)}while(s(t));return l=15}if(a(t))return r++,o+=String.fromCharCode(t),13===t&&10===e.charCodeAt(r)&&(r++,o+="\n"),h++,f=r,l=14;switch(t){case 123:return r++,l=1;case 125:return r++,l=2;case 91:return r++,l=3;case 93:return r++,l=4;case 58:return r++,l=6;case 44:return r++,l=5;case 34:return r++,o=function(){for(var t="",o=r;;){if(r>=n){t+=e.substring(o,r),d=2;break}var i=e.charCodeAt(r);if(34===i){t+=e.substring(o,r),r++;break}if(92!==i){if(i>=0&&i<=31){if(a(i)){t+=e.substring(o,r),d=2;break}d=6}r++}else{if(t+=e.substring(o,r),++r>=n){d=2;break}switch(e.charCodeAt(r++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var s=m(4,!0);s>=0?t+=String.fromCharCode(s):d=4;break;default:d=5}o=r}}return t}(),l=10;case 47:var g=r-1;if(47===e.charCodeAt(r+1)){for(r+=2;r<n&&!a(e.charCodeAt(r));)r++;return o=e.substring(g,r),l=12}if(42===e.charCodeAt(r+1)){r+=2;for(var v=n-1,E=!1;r<v;){var $=e.charCodeAt(r);if(42===$&&47===e.charCodeAt(r+1)){r+=2,E=!0;break}r++,a($)&&(13===$&&10===e.charCodeAt(r)&&r++,h++,f=r)}return E||(r++,d=1),o=e.substring(g,r),l=13}return o+=String.fromCharCode(t),r++,l=16;case 45:if(o+=String.fromCharCode(t),++r===n||!c(e.charCodeAt(r)))return l=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=function(){var t=r;if(48===e.charCodeAt(r))r++;else for(r++;r<e.length&&c(e.charCodeAt(r));)r++;if(r<e.length&&46===e.charCodeAt(r)){if(!(++r<e.length&&c(e.charCodeAt(r))))return d=3,e.substring(t,r);for(r++;r<e.length&&c(e.charCodeAt(r));)r++}var n=r;if(r<e.length&&(69===e.charCodeAt(r)||101===e.charCodeAt(r)))if((++r<e.length&&43===e.charCodeAt(r)||45===e.charCodeAt(r))&&r++,r<e.length&&c(e.charCodeAt(r))){for(r++;r<e.length&&c(e.charCodeAt(r));)r++;n=r}else d=3;return e.substring(t,n)}(),l=11;default:for(;r<n&&w(t);)r++,t=e.charCodeAt(r);if(i!==r){switch(o=e.substring(i,r)){case"true":return l=8;case"false":return l=9;case"null":return l=7}return l=16}return o+=String.fromCharCode(t),r++,l=16}}function w(e){if(s(e)||a(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){r=e,o="",i=0,l=16,d=0},getPosition:function(){return r},scan:t?function(){var e;do{e=g()}while(e>=12&&e<=15);return e}:g,getToken:function(){return l},getTokenValue:function(){return o},getTokenOffset:function(){return i},getTokenLength:function(){return r-i},getTokenStartLine:function(){return u},getTokenStartCharacter:function(){return i-p},getTokenError:function(){return d}}}(e,!1);function i(e){return e?function(){return e(o.getTokenOffset(),o.getTokenLength(),o.getTokenStartLine(),o.getTokenStartCharacter())}:function(){return!0}}function l(e){return e?function(t){return e(t,o.getTokenOffset(),o.getTokenLength(),o.getTokenStartLine(),o.getTokenStartCharacter())}:function(){return!0}}var h=i(t.onObjectBegin),u=l(t.onObjectProperty),f=i(t.onObjectEnd),p=i(t.onArrayBegin),d=i(t.onArrayEnd),m=l(t.onLiteralValue),g=l(t.onSeparator),w=i(t.onComment),v=l(t.onError),E=n&&n.disallowComments,$=n&&n.allowTrailingComma;function y(){for(;;){var e=o.scan();switch(o.getTokenError()){case 4:C(14);break;case 5:C(15);break;case 3:C(13);break;case 1:E||C(11);break;case 2:C(12);break;case 6:C(16)}switch(e){case 12:case 13:E?C(10):w();break;case 16:C(1);break;case 15:case 14:break;default:return e}}}function C(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),v(e),t.length+n.length>0)for(var r=o.getToken();17!==r;){if(-1!==t.indexOf(r)){y();break}if(-1!==n.indexOf(r))break;r=y()}}function S(e){var t=o.getTokenValue();return e?m(t):u(t),y(),!0}return y(),17===o.getToken()?!!n.allowEmptyContent||(C(4,[],[]),!1):function e(){switch(o.getToken()){case 3:return function(){p(),y();for(var t=!1;4!==o.getToken()&&17!==o.getToken();){if(5===o.getToken()){if(t||C(4,[],[]),g(","),y(),4===o.getToken()&&$)break}else t&&C(6,[],[]);e()||C(4,[],[4,5]),t=!0}return d(),4!==o.getToken()?C(8,[4],[]):y(),!0}();case 1:return function(){h(),y();for(var t=!1;2!==o.getToken()&&17!==o.getToken();){if(5===o.getToken()){if(t||C(4,[],[]),g(","),y(),2===o.getToken()&&$)break}else t&&C(6,[],[]);(10!==o.getToken()?(C(3,[],[2,5]),0):(S(!1),6===o.getToken()?(g(":"),y(),e()||C(4,[],[2,5])):C(5,[],[2,5]),1))||C(4,[],[2,5]),t=!0}return f(),2!==o.getToken()?C(7,[2],[]):y(),!0}();case 10:return S(!0);default:return function(){switch(o.getToken()){case 11:var e=o.getTokenValue(),t=Number(e);isNaN(t)&&(C(2),t=0),m(t);break;case 7:m(null);break;case 8:m(!0);break;case 9:m(!1);break;default:return!1}return y(),!0}()}}()?(17!==o.getToken()&&C(9,[],[]),!0):(C(4,[],[]),!1)}!function(e){e.DEFAULT={allowTrailingComma:!1}}(r||(r={}));var h=n(7369),u=n(9496),f=n(972),p=n(5618);const d=f.zW.scope(void 0,!1);d.warning.options={},d.error.options={};let m=[];function g(){return m}const w=[];async function v(e,t=!1){const n=await(0,p.Vi)((t=>(0,i.readFile)(e,t))).catch((e=>e));if(n instanceof Error)return"ENOENT"!==n.code||t?(d.error`Error while reading config file ${e}: ${n}`,[]):[];const o=[],s=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=r.DEFAULT);var o=null,i=[],s=[];function a(e){Array.isArray(i)?i.push(e):null!==o&&(i[o]=e)}return l(e,{onObjectBegin:function(){var e={};a(e),s.push(i),i=e,o=null},onObjectProperty:function(e){o=e},onObjectEnd:function(){i=s.pop()},onArrayBegin:function(){var e=[];a(e),s.push(i),i=e,o=null},onArrayEnd:function(){i=s.pop()},onLiteralValue:a,onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n),i[0]}(n.toString(),o);return!s||o.length?(d.error`Couldn't parse ${e} as a 'JSON with Comments' file`,u.window.showErrorMessage(`Couldn't parse ${e} as a 'JSON with Comments' file`),[]):(s.forEach((t=>t._locations=[t._location=e])),d.debug`Read ${s.length} configs from ${e}`,s)}async function E(){d.info("Loading configurations..."),await async function(){const e=u.workspace.getConfiguration("sshfs"),t=e.inspect("configs");let n=0;const r=[...t.globalValue||[],...t.workspaceValue||[],...t.workspaceFolderValue||[]];function o(t,o){if(!t)return;let i=!0;return t.forEach((e=>{e.name||([e.name,n]=function(e,t=0){let n=t?`unnamed${t}`:"unnamed";for(;e.find((e=>e.name===n));)n=`unnamed${t+=1}`;return[n,t+1]}(r,n),d.warning(`Renamed unnamed config to ${e.name}`),i=!1)})),i?void 0:e.update("configs",t,o).then((()=>{}),(e=>d.error`Error while saving configs (CT=${o}): ${e}`))}await o(t.globalValue,u.ConfigurationTarget.Global),await o(t.workspaceValue,u.ConfigurationTarget.Workspace),await o(t.workspaceFolderValue,u.ConfigurationTarget.WorkspaceFolder)}();const e={folder:[],workspace:[],global:[]},t=u.workspace.getConfiguration("sshfs"),n={workspace:[],global:[]};if(t){const r=t.inspect("configs");e.workspace=r.workspaceValue||[],e.global=r.globalValue||[],e.workspace.forEach((e=>e._locations=[e._location=u.ConfigurationTarget.Workspace])),e.global.forEach((e=>e._locations=[e._location=u.ConfigurationTarget.Global]));const o=t.inspect("configpaths");n.workspace=o.workspaceValue||[],n.global=o.globalValue||[]}for(const t of n.workspace)e.workspace=[...e.workspace,...await v(t,!0)];for(const t of n.global)e.global=[...e.global,...await v(t,!0)];const r=[...e.folder,...e.workspace,...e.global];r.forEach((e=>e.name=(e.name||"").toLowerCase()));for(const e of r)e.name?(0,o.WP)(e.name)&&(d.warning(`Found a SSH FS config with the invalid name "${e.name}", prompting user how to handle`),u.window.showErrorMessage(`Invalid SSH FS config name: ${e.name}`,"Rename","Delete","Skip").then((async t=>{if("Rename"===t){const t=await u.window.showInputBox({prompt:`New name for: ${e.name}`,validateInput:o.WP,placeHolder:"New name"});if(t){const n=e.name;return d.info`Renaming config "${n}" to "${t}"`,e.name=t,C(e,n)}}else if("Delete"===t)return S(e);d.warning`Skipped SSH FS config '${e.name}'`,u.window.showWarningMessage(`Skipped SSH FS config '${e.name}'`)}))):(d.error`Skipped an invalid SSH FS config (missing a name field):\n${e}`,u.window.showErrorMessage("Skipped an invalid SSH FS config (missing a name field)"));return r.filter((e=>!(0,o.WP)(e.name)))}async function $(){const e=await E(),t=[];for(const n of e){const e=t.find((e=>e.name===n.name));e?e.merge?(d.debug`\tMerging duplicate ${n.name} from ${n._locations}`,e._locations=[...e._locations,...n._locations],Object.assign(e,Object.assign(n,e))):d.debug`\tIgnoring duplicate ${n.name} from ${n._locations}`:(d.debug`\tAdded configuration ${n.name} from ${n._locations}`,t.push(n))}return m=t,d.info`Found ${m.length} configurations`,w.forEach((e=>e(m))),m}async function y(e,t){switch(e){case u.ConfigurationTarget.Global:case u.ConfigurationTarget.Workspace:case u.ConfigurationTarget.WorkspaceFolder:const n=u.workspace.getConfiguration("sshfs"),r=n.inspect("configs");let o=t([,r.globalValue,r.workspaceValue,r.workspaceFolderValue][e]||[]);if(!o)return;return o=o.map((e=>{const t={...e};for(const n in e)"_"===n[0]&&delete t[n];return t})),await n.update("configs",o,e),void d.debug`\tUpdated configs in ${[,"Global","Workspace","WorkspaceFolder"][e]} settings.json`}if("string"!=typeof e)throw new Error(`Invalid _location field: ${e}`);let n=t(await v(e,!0));if(!n)return;n=n.map((e=>{const t={...e};for(const n in e)"_"===n[0]&&delete t[n];return t}));const r=JSON.stringify(n,null,4);await(0,p.Vi)((t=>(0,i.writeFile)(e,r,t))).catch((t=>{throw d.error`Error while writing configs to ${e}: ${t}`,t})),d.debug`\tWritten modified configs to ${e}`,await $()}async function C(e,t=e.name){const{name:n,_location:r}=e;if(!n)throw new Error("The given config has no name field");if(!r)throw new Error("The given config has no _location field");d.info`Saving config ${n} to ${r}`,t!==e.name&&d.debug`\tSaving ${n} will try to overwrite old config ${t}`,await y(r,(n=>{d.debug`\tConfig location '${r}' has following configs: ${n.map((e=>e.name)).join(", ")}`;const o=n.findIndex((e=>!!e.name&&e.name.toLowerCase()===t.toLowerCase()));return-1===o?(d.debug`\tAdding the new config to the existing configs`,n.push(e)):(d.debug`\tOverwriting config '${n[o].name}' at index ${o} with the new config`,n[o]=e),n}))}async function S(e){const{name:t,_location:n}=e;if(!t)throw new Error("The given config has no name field");if(!n)throw new Error("The given config has no _location field");d.info`Deleting config ${t} in ${n}`,await y(n,(e=>{d.debug`\tConfig location '${n}' has following configs: ${e.map((e=>e.name)).join(", ")}`;const r=e.findIndex((e=>!!e.name&&e.name.toLowerCase()===t.toLowerCase()));if(-1===r)throw new Error(`Config '${t}' not found in ${n}`);return d.debug`\tDeleting config '${e[r].name}' at index ${r}`,e.splice(r,1),e}))}function b(e){const t=e.toLowerCase(),n=g().find((e=>e.name.toLowerCase()===t));if(n)return n;if(!e.includes("@"))return;const r=(0,o.Xh)(e);if("string"==typeof r)return;const[i]=r,s=g().find((e=>e.name.toLowerCase()===i.host.toLowerCase()));return s?(f.zW.info`getConfig('${e}') led to '${i.name}' which matches config '${s.name}'`,{...s,...i,host:s.host||i.host,_location:void 0,_locations:[...s._locations,...i._locations]}):i}function T(e,t){if(typeof e!=typeof t)return!1;if("object"!=typeof e)return e===t;if(!e||!t)return e===t;if(Array.isArray(e))return!!Array.isArray(t)&&e.length===t.length&&e.every(((e,n)=>T(e,t[n])));const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const r of n)if(!T(e[r],t[r]))return!1;return!0}function k(e,t){return T(e,t)}function R(e,t){if(void 0===e)return{};if(!Array.isArray(e))throw new Error(`Expected string array for flags, but got: ${e}`);const n={};for(const r of e){let e=r,o=null;const i=r.indexOf("=");-1!==i?(e=r.substring(0,i),o=r.substring(i+1)):r.startsWith("+")?(e=r.substring(1),o=!0):r.startsWith("-")&&(e=r.substring(1),o=!1),e=e.toLocaleLowerCase(),e in n||(n[e]=[o,t])}return n}u.workspace.onDidChangeConfiguration((async e=>$()));const O=new Set;function A(e){return e(),O.add(e),new u.Disposable((()=>O.delete(e)))}const I=[];let x={};function N(){var e;const t={},n=u.workspace.getConfiguration("sshfs").inspect("flags");if(!n)throw new Error('Could not inspect "sshfs.flags" config field');const r=(e,n)=>Object.assign(t,R(e,n));r(I,"Built-in Default"),r(n.defaultValue,"Default Settings"),(null===(e=process.versions.electron)||void 0===e?void 0:e.match(/^11\.(0|1|2)\./))&&r(["+DF-GE"],"Fix for issue #239"),h.gte(u.version,"1.56.0")&&r(["+FS_NOTIFY_ERRORS"],"Fix for issue #282"),r(n.globalValue,"Global Settings"),r(n.workspaceValue,"Workspace Settings"),r(n.workspaceFolderValue,"WorkspaceFolder Settings"),f.zW.info`Calculated config flags: ${t}`;for(const e of O)(0,p.L0)(e).catch((e=>f.zW.error`onGlobalFlagsChanged listener errored: ${e}`));return x=t}function L(e,t){return function(e){return{...x,...R(e,"Override")}}(t)[e.toLowerCase()]}function F(e,t,n){const r=L(e,n);if(!r)return[t,"missing"];const[o,i]=r;if(null==o)return[!0,i];if("boolean"==typeof o)return[o,i];const s=o.toLowerCase();if("true"===s||"t"===s||"yes"===s||"y"===s)return[!0,i];if("false"===s||"f"===s||"no"===s||"n"===s)return[!1,i];throw new Error(`Could not convert '${o}' for flag '${e}' to a boolean!`)}u.workspace.onDidChangeConfiguration((e=>{e.affectsConfiguration("sshfs.flags")&&N()})),N()},972:(e,t,n)=>{"use strict";n.d(t,{eM:()=>i,ew:()=>s,j7:()=>c,_$:()=>l,RS:()=>u,zW:()=>p});var r=n(7897),o=n(9496);let i=!1;function s(e){if(console.warn(`[vscode-sshfs] Debug mode set to ${e}`),i=e,e){try{n(4129).setup()}catch(e){console.warn("Could not set up .pnp.cjs:",e)}try{n(4261).install()}catch(e){console.warn("Could not install source-map-support:",e)}}}const a=o.window.createOutputChannel("SSH FS"),c={callStacktrace:0},l={callStacktrace:1};class h{constructor(e,t=!1){var n;if(this.name=e,this.defaultLoggingOptions={reportedFromLevel:0,callStacktrace:0,callStacktraceOffset:0,maxErrorStack:0},this.debug=this.wrapType("DEBUG"),this.info=this.wrapType("INFO"),this.warning=this.wrapType("WARNING",{callStacktrace:3,reportedFromLevel:2}),this.error=this.wrapType("ERROR",{callStacktrace:5,reportedFromLevel:2,maxErrorStack:10}),t){const e="number"==typeof t?t:1,r=null===(n=(new Error).stack)||void 0===n?void 0:n.split("\n").slice(3,3+e).join("\n");this.stack=r||"<stack unavailable>"}}doPrint(e,t,n){const{reportedFromLevel:r}=n,o=this.name?`[${this.name}] `:"";let s="";if(this.name&&this.stack&&r>=2?s=`\nReported by logger ${this.name}:\n${this.stack}`:this.name&&r>=1?s=`\nReported by logger ${this.name}`:this.stack&&r>=2?s=`\nReported by logger:\n${this.stack}`:this.stack&&1===r&&(s=`\nReported by logger:\n${this.stack.split("\n",2)[0]}`),this.parent)return this.parent.doPrint(e,`${o}${t}${s}`,n);const c=`[${e}]${" ".repeat(Math.max(0,8-e.length))}${o}${t}${s}`;a.appendLine(c),i&&(console[e.toLowerCase()]||console.log).call(console,c)}formatValue(e,t){var n,i;if("string"==typeof e)return e;if(e instanceof Error&&e.stack){let r=`${e.name}: ${e.message}`;try{const t=JSON.stringify(e);"{}"!==t&&(r+=`\nJSON: ${t}`)}finally{}const{maxErrorStack:o}=t;if(e.stack&&o){let{stack:t}=e;o>0&&(t=t.split(/\n/g).slice(0,o+1).join("\n")),r+="\n"+t}if(0!==o)for(let t=e;"promiseCause"in(i=t)&&i.promiseCause instanceof Error;t=t.promiseCause){let e=null===(n=t.promiseCause.stack)||void 0===n?void 0:n.split(/\n/g);e&&(o>0&&(e=e.slice(1,o+1)),r+=`\nCaused by ${t.promiseCauseName||"promise"}:\n${e.join("\n")}`)}return r}if(e instanceof o.Uri)return e.toString();if((0,r.AD)(e))return JSON.stringify(f(e),null,4);try{const t=JSON.stringify(e);return t.length<100?t:JSON.stringify(e,null,4)}catch(t){try{return`${e}`}catch(e){return`[Error formatting value: ${e.message||e}]`}}}print(e,t,n){const r={...this.defaultLoggingOptions,...n};t=this.formatValue(t,r);const{callStacktrace:o,callStacktraceOffset:i=0}=r;if(o){let e=(new Error).stack,n=e&&e.split("\n");n=n&&n.slice(i+3,o>0?i+3+o:void 0),e=n?n.join("\n"):"<stack unavailable>",t+=`\nLogged at:\n${e}`}this.doPrint(e.toUpperCase(),t,r)}printTemplate(e,t,n,r){const o={...this.defaultLoggingOptions,...r};o.callStacktraceOffset=(o.callStacktraceOffset||0)+1,this.print(e,t.reduce(((e,t,r)=>e+t+this.formatValue(n[r]||"",o)),""),r)}scope(e,t=!1){const n=new h(e,t);return n.parent=this,n}wrapType(e,t={}){const n=(t,...r)=>{const o={...n.options};return o.callStacktraceOffset=(o.callStacktraceOffset||0)+1,"string"==typeof t||t instanceof Error?n.logger.print(n.type,t,o):Array.isArray(t)?n.logger.printTemplate(n.type,t,r,o):void n.logger.error`Trying to log type ${e} with message=${t} and args=${r}`};return n.logger=this,n.type=e,n.options=t,n.withOptions=e=>this.wrapType(n.type,{...n.options,...e}),n}}function u(e=1,t={}){return{...t,callStacktraceOffset:(t.callStacktraceOffset||0)+e}}function f(e){return{...e,password:"string"==typeof e.password?"<censored>":e.password,passphrase:"string"==typeof e.passphrase?"<censored>":e.passphrase,privateKey:e.privateKey instanceof Buffer?`Buffer(${e.privateKey.length})`:e.privateKey,sock:e.sock?"<socket>":e.sock,_calculated:e._calculated?f(e._calculated):e._calculated}}const p=new h;p.info`
Created output channel for vscode-sshfs
When posting your logs somewhere, keep the following in mind:
  - While the logging tries to censor your passwords/passphrases/..., double check!
    Maybe you also want to censor out e.g. the hostname/IP you're connecting to.
  - If you want to report an issue regarding authentication or something else that
    seems to be more of an issue with the actual SSH2 connection, it might be handy
    to reconnect with this added to your User Settings (settings.json) first:
      "sshfs.flags": [ "DEBUG_SSH2" ],
    This will (for new connections) also enable internal SSH2 logging.
`},4620:(e,t,n)=>{"use strict";n.r(t),n.d(t,{isSSHPseudoTerminal:()=>u,replaceVariables:()=>f,replaceVariablesRecursive:()=>p,createTerminal:()=>d,createTextTerminal:()=>m});var r=n(1017),o=n(9496),i=n(801),s=n(972),a=n(5618);const[c,l]=[480,640],h={height:c,width:l,term:"xterm-256color"};function u(e){const t=e;return!!(t.connection&&t.status&&t.handleInput)}function f(e,t){return e.replace(/\$\{(.*?)\}/g,((e,t)=>{if(!t.startsWith("remote"))return e;const[n,i]=t.split(":"),a=()=>{var t,n;const r=null===(n=null===(t=o.window.activeTextEditor)||void 0===t?void 0:t.document)||void 0===n?void 0:n.uri;if(r&&"ssh"===r.scheme)return r;if(r)throw new Error(`Variable ${e}: Active editor is not a ssh:// file`);throw new Error(`Variable ${e} can not be resolved. Please open an editor.`)},{workspaceFolders:c=[]}=o.workspace,l=c.filter((e=>"ssh"===e.uri.scheme)),h=1===l.length?l[0]:void 0,u=()=>{var t;const{workspaceFolders:n=[]}=o.workspace;if(i){const r=null===(t=n.find((e=>e.name===i)))||void 0===t?void 0:t.uri;if(r&&"ssh"===r.scheme)return r;if(r)throw new Error(`Variable ${e}: Workspace folder '${i}' is not a ssh:// folder`);throw new Error(`Variable ${e} can not be resolved. No such folder '${i}'.`)}if(h)return h.uri;if(l.length>1)throw new Error(`Variable ${e} can not be resolved in a multi ssh:// folder workspace. Scope this variable using ':' and a workspace folder name.`);throw new Error(`Variable ${e} can not be resolved. Please open an ssh:// folder.`)};switch(n){case"remoteWorkspaceRoot":case"remoteWorkspaceFolder":return u().path;case"remoteWorkspaceRootFolderName":case"remoteWorkspaceFolderBasename":return r.basename(u().path);case"remoteFile":return a().path;case"remoteFileWorkspaceFolder":return(()=>{var t;const n=a(),r=null===(t=o.workspace.getWorkspaceFolder(n))||void 0===t?void 0:t.uri;if(r)return r;throw new Error(`Variable ${e}: can not find workspace folder of '${n}'.`)})().path;case"remoteRelativeFile":return h||i?r.relative(u().path,a().path):a().path;case"remoteRelativeFileDirname":{const e=r.dirname(a().path);if(h||i){const t=r.relative(u().path,e);return 0===t.length?".":t}return e}case"remoteFileDirname":return r.dirname(a().path);case"remoteFileExtname":return r.extname(a().path);case"remoteFileBasename":return r.basename(a().path);case"remoteFileBasenameNoExtension":{const e=r.basename(a().path);return e.slice(0,e.length-r.extname(e).length)}case"remoteFileDirnameBasename":return r.basename(r.dirname(a().path));case"remotePathSeparator":return r.posix.sep;default:const t=`Unrecognized task variable '${e}' starting with 'remote', ignoring`;return s.zW.warning(t,s.j7),o.window.showWarningMessage(t),e}}))}async function p(e,t){if("string"==typeof e)return t(e);if(Array.isArray(e))return e.map((e=>this.replaceVariablesRecursive(e,t)));if(!("object"!=typeof e||null===e||e instanceof RegExp||e instanceof Date)){const n={};for(let r in e){const o=await p(e[r],t);r=await p(r,t),n[r]=o}return n}return e}async function d(e){const{connection:t}=e,{actualConfig:n,client:r,shellConfig:u}=t,p=new o.EventEmitter,d=new o.EventEmitter,m=new o.EventEmitter;let g;const w={status:"opening",connection:t,onDidWrite:p.event,onDidClose:d.event,onDidOpen:m.event,close(){var e;const{channel:t,status:n}=w;"closed"!==n&&(t&&(w.status="closed",t.signal("INT"),t.signal("SIGINT"),t.write(""),t.close(),w.channel=void 0),"wait-to-close"===n&&(null===(e=w.terminal)||void 0===e||e.dispose(),w.terminal=void 0,w.status="closed",d.fire(0)))},async open(o){var c;p.fire(`Connecting to ${n.label||n.name}...\r\n`);try{const[c]=(0,i.z0)("WINDOWS_COMMAND_SEPARATOR",u.isWindows,n.flags),l=c?" && ":"; ";let g=[],v="$SHELL";u.isWindows&&(v=u.shell);const E=(0,a.nr)(t.environment,e.environment);if(g.push((0,a.xO)(E,u.setEnv)),(0,i.z0)("REMOTE_COMMANDS",!1,n.flags)[0]&&u.setupRemoteCommands){const e=await u.setupRemoteCommands(t);(null==e?void 0:e.length)&&g.push((0,a.$R)(e,l))}if(e.command)g.push(f(e.command.replace(/$SHELL/g,v)));else{const e=(0,a.$R)(n.terminalCommand,l);let t=e?f(e.replace(/$SHELL/g,v)):v;g.push(t)}let{workingDirectory:$}=e;$=$||n.root;let y=(0,a.$R)(g,l);if($)if(y.includes("${workingDirectory}"))y=y.replace(/\${workingDirectory}/g,$);else{if($.startsWith("~")){if(u.isWindows)throw new Error(`Working directory '${$}' starts with ~ for a Windows shell`);$=`~/"${$.slice(2)}"`}else u.isWindows&&$.match(/^\/[a-zA-Z]:/)&&($=$.slice(1)),$=`"${$}"`;y=(0,a.$R)([`cd ${$}`,...g],l)}else y=y.replace(/\${workingDirectory}/g,"");const C={...h,cols:null==o?void 0:o.columns,rows:null==o?void 0:o.rows};s.zW.debug(`Starting shell for ${t.actualConfig.name}: ${y}`);const S=await(0,a.Vi)((e=>r.exec(y,{pty:C},e)));if(!S)throw new Error("Could not create remote terminal");w.channel=S;const b=Date.now();S.once("exit",((t,n,r,o)=>{s.zW.debug`Terminal session closed: ${{code:t,signal:n,description:o,status:w.status}}`,t&&Date.now()<b+1e3&&!e.command?(p.fire(`Got error code ${t}${n?` with signal ${n}`:""}\r\n`),o&&p.fire(`Extra info: ${o}\r\n`),p.fire("Press a key to close the terminal\r\n"),p.fire("Possible more stdout/stderr below:\r\n"),w.status="wait-to-close"):(d.fire(t||0),w.status="closed")})),S.once("readable",(()=>{"opening"===w.status&&(w.status="open"),m.fire()})),S.on("data",(e=>p.fire(e.toString()))),S.stderr.on("data",(e=>p.fire(e.toString())))}catch(e){s.zW.error`Error starting SSH terminal:\n${e}`,p.fire(`Error starting SSH terminal:\r\n${e}\r\n`),d.fire(1),w.status="closed",null===(c=w.channel)||void 0===c||c.destroy(),w.channel=void 0}},get terminal(){return g||(g=o.window.terminals.find((e=>"pty"in e.creationOptions&&e.creationOptions.pty===w)))},set terminal(e){g=e},setDimensions(e){var t;null===(t=w.channel)||void 0===t||t.setWindow(e.rows,e.columns,c,l)},handleInput(e){var t;if("wait-to-close"===w.status)return w.close();null===(t=w.channel)||void 0===t||t.write(e)}};return w}function m(e){const t=new o.EventEmitter,n=new o.EventEmitter,r=new o.EventEmitter;return{write:t.fire.bind(t),close:n.fire.bind(n),onDidWrite:t.event,onDidClose:n.event,onDidOpen:r.event,open:()=>e&&(t.fire(e+"\r\n"),n.fire(1))}}},5618:(e,t,n)=>{"use strict";n.d(t,{L0:()=>i,Vi:()=>s,Ru:()=>a,xO:()=>h,nr:()=>u,$R:()=>f});var r=n(972);function o(e,t){return t.reduce(((e,t)=>`${e}\n\tat ${t} (${t.getFunction()})`),`${e.name||"Error"}: ${e.message||""}`)}async function i(e,t=0,n="catchingPromise"){let[i,s]=[];return new Promise(((n,a)=>{[i,s]=function(e,t){const n=Error.prepareStackTrace;let r="";return Error.prepareStackTrace=(e,i)=>{const s=(n||o)(e,i.slice(t+1));return r=(n||o)(e,i.slice(0,t+1)),s},Error.captureStackTrace(e),e.stack=e.stack,Error.prepareStackTrace=n,[r.split("\n").slice(1),e]}(new Error,t+2),r.eM&&(s.stack=s.stack.split("\n",2)[0]+i.map((e=>e.replace("at","~at"))).join("\n")+"\n"+s.stack.split("\n").slice(1).join("\n"));try{const t=e(n,a);t instanceof Promise&&t.catch(a)}catch(e){a(e)}})).catch((e=>{if(e instanceof Error){let o=e.stack;if(o){const n=o.split("\n");let s=n.indexOf(i[3]);-1!==s&&(s-=2+t,e.stack=n[0]+"\n"+n.slice(1,s).join("\n"),r.eM&&(e.stack+="\n"+n.slice(s).map((e=>e.replace("at","~at"))).join("\n")))}let a=e.promiseCause;a instanceof Error||(a=e),"promiseCause"in a||(Object.defineProperty(a,"promiseCause",{value:s,configurable:!0,enumerable:!1}),Object.defineProperty(a,"promiseCauseName",{value:n,configurable:!0,enumerable:!1}))}throw e}))}async function s(e){return i(((t,n)=>{e(((e,r)=>e?n(e):t(r)))}),2,"toPromise")}function a(e){const t=Number(e);if(!Number.isInteger(t))throw new Error(`Wanting to use non-int '${e}' as port`);if(t<0||t>65565)throw new Error(`Wanting to use port ${t} outside the 1-65565 range`);return t}const c=/^[\w-/\\]+$/;function l(e){return c.test(e)?e:`'${e.replace(/'/g,"'\\''")}'`}function h(e,t){return e.map((({key:e,value:n})=>t(l(e),l(n)))).join("; ")}function u(...e){const t=new Map;for(let n of e)if(n)if(Array.isArray(n))for(const e of n)t.set(e.key,e);else for(const[e,r]of Object.entries(n))t.set(e,{key:e,value:r});return[...t.values()]}function f(e,t){return"string"==typeof e?e:null==e?void 0:e.filter((e=>null==e?void 0:e.trim())).join(t)}},7897:(e,t,n)=>{"use strict";function r(e){const t=[1,2];for(const{_location:n}of e)n&&(t.find((e=>e===n))||t.push(n));return t}function o(e,t=!1){const n=[];function r(e){n.find((t=>t===e))||n.push(e)}for(const{group:n}of e){if(!n)continue;const e=t?n.split("."):[n];e.forEach(((t,n)=>r([...e.slice(0,n),t].join("."))))}return n}function i(e){return"object"==typeof e&&"string"==typeof e.name&&Array.isArray(e._locations)}function s(e){return e?e.match(/^[\w_\\/.@\-+]+$/)?null:"A SSH FS name can only exists of lowercase alphanumeric characters, slashes and any of these: _.+-@":"Missing a name for this SSH FS"}n.d(t,{JC:()=>r,jA:()=>o,AD:()=>i,WP:()=>s,Xh:()=>c});const a=/^((?<user>[\w\-._]+)?(;[\w-]+=[\w\d-]+(,[\w\d-]+=[\w\d-]+)*)?@)?(?<host>[^\s@\\/:,=]+)(:(?<port>\d+))?(?<path>\/\S*)?$/;function c(e){const t=(e=e.trim()).match(a);if(!t)return'Invalid format, expected something like "user@example.com:22/some/path"';const{user:n,host:r,path:o}=t.groups,i=t.groups.port,s=i?Number.parseInt(i):void 0;return i&&(!s||s<1||s>65535)?`The string '${s}' is not a valid port number`:[{name:`${n||""}@${r}${s?`:${s}`:""}${o||""}`,host:r,port:s,instantConnection:!0,username:n||"$USERNAME",_locations:[]},o]}},4129:e=>{"use strict";e.exports=require("../.pnp.cjs")},4261:e=>{"use strict";e.exports=require("source-map-support")},9496:e=>{"use strict";e.exports=require("vscode")},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e].call(n.exports,n,n.exports,i),n.exports}i.m=r,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);i.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,i.d(o,s),o},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>e+".extension.js",i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n={"0967":1},i.f.require=(e,t)=>{n[e]||(e=>{var t=e.modules,r=e.ids,o=e.runtime;for(var s in t)i.o(t,s)&&(i.m[s]=t[s]);o&&o(i);for(var a=0;a<r.length;a++)n[r[a]]=1})(require("./"+i.u(e)))};var s={};(()=>{"use strict";i.r(s),i.d(s,{activate:()=>R});var e=i(9496),t=i(801),n=i(972);const r=["stat","readDirectory","createDirectory","readFile","writeFile","delete","rename"].map((e=>e.toLowerCase()));class o{constructor(n){this.manager=n,this.onDidChangeFileEmitter=new e.EventEmitter,this.onDidChangeFile=this.onDidChangeFileEmitter.event,(0,t.gV)((()=>{var e;this.debugFlags=`${(null===(e=(0,t.r0)("DEBUG_FSR"))||void 0===e?void 0:e[0])||""}`.toLowerCase().split(/,\s*|\s+/g),this.debugFlags.includes("all")&&this.debugFlags.push(...r)}))}async assertFs(e){return this.manager.getFs(e)||this.manager.createFileSystem(e.authority)}watch(t,n){return new e.Disposable((()=>{}))}async stat(e){return this.debugFlags.includes("stat")&&n.zW.debug`Performing stat for ${e}`,(await this.assertFs(e)).stat(e)}async readDirectory(e){return this.debugFlags.includes("readdirectory")&&n.zW.debug`Reading directory ${e}`,(await this.assertFs(e)).readDirectory(e)}async createDirectory(e){return this.debugFlags.includes("createdirectory")&&n.zW.debug`Creating directory ${e}`,(await this.assertFs(e)).createDirectory(e)}async readFile(e){return this.debugFlags.includes("readfile")&&n.zW.debug`Reading ${e}`,(await this.assertFs(e)).readFile(e)}async writeFile(e,t,r){return this.debugFlags.includes("writefile")&&n.zW.debug`Writing ${t.length} bytes to ${e} (options: ${r})`,(await this.assertFs(e)).writeFile(e,t,r)}async delete(e,t){return this.debugFlags.includes("delete")&&n.zW.debug`Deleting ${e} (options: ${t})`,(await this.assertFs(e)).delete(e,t)}async rename(e,t,r){this.debugFlags.includes("rename")&&n.zW.debug`Renaming ${e} to ${t}`;const o=await this.assertFs(e);if(o!==await this.assertFs(t))throw new Error("Can't rename between different SSH filesystems");return o.rename(e,t,r)}}var a=i(1017);const c=require("readline");var l=i(5618);async function h(e){const t=`/tmp/.Kelvin_sshfs.RcBin.${e.actualConfig.username||Date.now()}`,r=await(0,l.Vi)((t=>e.client.sftp(t)));await(0,l.Vi)((e=>r.mkdir(t,{mode:493},e))).catch((()=>{}));const[,o]=await async function(e,t,r,o,i){var s;const a=(s=e.cache).rc_files||(s.rc_files={});if(a[t])return[!1,a[t]];try{return i||(i=await(0,l.Vi)((t=>e.client.sftp(t)))),await(0,l.Vi)((e=>i.writeFile(r,'#!/bin/sh\nif [ "$#" -ne 1 ] || [ $1 = "help" ] || [ $1 = "--help" ] || [ $1 = "-h" ] || [ $1 = "-?" ]; then\n    echo "Usage:";\n    echo "  code <path_to_existing_file>    Will make VS Code open the file";\n    echo "  code <path_to_existing_folder>  Will make VS Code add the folder as an additional workspace folder";\n    echo "  code <path_to_nonexisting_file> Will prompt VS Code to create an empty file, then open it afterwards";\nelif [ ! -n "$KELVIN_SSHFS_CMD_PATH" ]; then\n    echo "Not running in a terminal spawned by SSH FS? Failed to sent!"\nelif [ -c "$KELVIN_SSHFS_CMD_PATH" ]; then\n    echo "::sshfs:code:$(pwd):::$1" >> $KELVIN_SSHFS_CMD_PATH;\n    echo "Command sent to SSH FS extension";\nelse\n    echo "Missing command shell pty of SSH FS extension? Failed to sent!"\nfi\n',{mode:493},e))),[!0,a[t]=r]}catch(e){return n.zW.error`Failed to write ${t} file to '${r}':\n${e}`,[!1,null]}}(e,"CmdCode",`${t}/code`,0,r);return o?[e.shellConfig.setEnv("PATH",`${t}:$PATH`)]:'echo "An error occured while adding REMOTE_COMMANDS support"'}const u={};{const e=(e,t,n,r,o=!1)=>{u[e]={shell:e,setEnv:t,setupRemoteCommands:n,embedSubstitutions:r,isWindows:o}},t=(e,t)=>`export ${e}=${t}`,n=(e,t)=>`set -gx ${e} ${t}`,r=(e,t)=>`setenv ${e} ${t}`,o=(e,t)=>`$env:${e}="${t}"`,i=(e,t)=>`set ${e}=${t}`,s=(e,...t)=>'"'+t.reduce(((t,n,r)=>`${t}\`${n}\`${e[r+1]}`),e[0])+'"',a=(e,...t)=>t.reduce(((t,n,r)=>`${t}"(${n})"${e[r+1]}`),'"'+e[0])+'"',c=(e,...t)=>t.reduce(((t,n,r)=>`${t}$(${n})${e[r+1]}`),'"'+e[0])+'"';e("sh",t,h,s),e("bash",t,h,s),e("rbash",t,h,s),e("ash",t,h,s),e("dash",t,h,s),e("ksh",t,h,s),e("zsh",t,h,s),e("fish",n,h,a),e("csh",r,h,s),e("tcsh",r,h,s),e("powershell",o,void 0,c,!0),e("cmd.exe",i,void 0,void 0,!0)}async function f(e,t){const n=await(0,l.Vi)((n=>e.exec(t,n))),r=["",""];if(n.on("data",(e=>r[0]+=e)),n.stderr.on("data",(e=>r[1]+=e)),await(0,l.Vi)((e=>{n.once("error",e),n.once("close",e)})).catch((e=>{if("number"!=typeof e)throw e;throw new Error(`Command '${t}' failed with exit code ${e}${r[1]?`:\n${r[1].trim()}`:""}`)})),!r[0]){if(!r[1])return null;throw new Error(`Command '${t}' only produced stderr:\n${r[1].trim()}`)}return r[0]}class p{constructor(){this.onConnectionAddedEmitter=new e.EventEmitter,this.onConnectionRemovedEmitter=new e.EventEmitter,this.onConnectionUpdatedEmitter=new e.EventEmitter,this.onPendingChangedEmitter=new e.EventEmitter,this.connections=[],this.pendingConnections={},this.onConnectionAdded=this.onConnectionAddedEmitter.event,this.onConnectionRemoved=this.onConnectionRemovedEmitter.event,this.onConnectionUpdated=this.onConnectionUpdatedEmitter.event,this.onPendingChanged=this.onPendingChangedEmitter.event}getActiveConnection(e,n){return n&&this.connections.find((e=>(0,t.ok)(e.config,n)))||(n?void 0:this.connections.find((t=>t.config.name===e)))}getActiveConnections(){return[...this.connections]}getPendingConnections(){return Object.keys(this.pendingConnections).map((e=>[e,this.pendingConnections[e][1]]))}async _createCommandTerminal(t,r,o,i){const s=n.zW.scope(`CmdTerm(${o})`);if(!r.embedSubstitutions)throw new Error(`Shell '${r.shell}' does not support embedding substitutions`);const h=await(0,l.Vi)((e=>t.shell({},e)));return s.debug(`TTY COMMAND: echo ${r.embedSubstitutions`::sshfs:${"echo TTY"}:${"tty"}`}\n`),h.write(`echo ${r.embedSubstitutions`::sshfs:${"echo TTY"}:${"tty"}`}\n`),new Promise(((t,n)=>{setTimeout((()=>n(new Error("Timeout fetching command path"))),1e4);const r=c.createInterface(h);h.once("error",n),h.once("close",(()=>n())),r.on("line",(async n=>{var r;i&&s.debug("<< "+n);const[,c,l,h]=n.match(/(.*?)::sshfs:(\w+):(.*)$/)||[];if(l&&!c.endsWith("echo "))switch(l){case"TTY":s.info("Got TTY path: "+h),t(h);break;case"code":let[n,i]=h.split(":::");if(!n||!i)return void s.error`Malformed 'code' command args: ${h}`;n=n.trim(),i=i.trim(),s.info`Received command to open '${i}' while in '${n}'`;const c=i.startsWith("/")?i:a.posix.join(n,i),u=e.Uri.parse(`ssh://${o}/${c}`);try{(await e.workspace.fs.stat(u)).type&e.FileType.Directory?await e.workspace.updateWorkspaceFolders((null===(r=e.workspace.workspaceFolders)||void 0===r?void 0:r.length)||0,0,{uri:u}):await e.window.showTextDocument(u)}catch(t){if(t instanceof e.FileSystemError){if("FileNotFound"===t.code){if(s.warning(`File '${c}' not found, prompting to create empty file`),"Yes"!==await e.window.showWarningMessage(`File '${c}' not found, create it?`,{modal:!0},"Yes"))return;try{await e.workspace.fs.writeFile(u,Buffer.of())}catch(t){return s.error(t),void e.window.showErrorMessage(`Failed to create an empty file at '${c}'`)}return void await e.window.showTextDocument(u)}e.window.showErrorMessage(`Error opening ${c}: ${t.name.replace(/ \(FileSystemError\)/g,"")}`)}else e.window.showErrorMessage(`Error opening ${c}: ${t.message||t}`)}return;default:s.error`Unrecognized command ${l} with args: ${h}`}}))}))}async _createConnection(r,o){const s=n.zW.scope(`createConnection(${r},${o?"config":"undefined"})`);s.info`Creating a new connection for '${r}'`;const{createSSH:c,calculateActualConfig:h}=await i.e("14f8").then(i.bind(i,3515));if(!(o=o||(await(0,t.O1)()).find((e=>e.name===r))))throw new Error(`No configuration with name '${r}' found`);const p=await h(o);if(!p)throw new Error("Connection cancelled");const d=await c(p);if(!d)throw new Error(`Could not create SSH session for '${r}'`);s.info`Remote version: ${d._remoteVer||"N/A"}`;const m=await async function(e,t){var r;try{const o=await f(e,"echo :::SHELL:$SHELL:SHELL:::"),i=null===(r=null==o?void 0:o.match(/:::SHELL:([^$].*?):SHELL:::/))||void 0===r?void 0:r[1];if(!i){const r=await async function(e){const t=await f(e,"echo $PSversionTable.PSVersion.ToString()").catch((e=>(console.error(e),null)));return(null==t?void 0:t.includes("PSVersion"))?null:t}(e);if(r)return null==t||t.debug(`Detected PowerShell version ${r}`),{...u.powershell,shell:"PowerShell"};const i=await async function(e){const t=await f(e,'systeminfo | findstr /BC:"OS Version"').catch((e=>(console.error(e),null))),n=null==t?void 0:t.trim().match(/^OS Version:[ \t]+(.*)$/);return(null==n?void 0:n[1])||null}(e);if(i)return null==t||t.debug(`Detected Command Prompt for Windows ${i}`),{...u["cmd.exe"],shell:"cmd.exe"};throw o&&(null==t||t.error(`Could not get $SHELL from following output:\n${o}`,n.j7)),new Error("Could not get $SHELL")}const s=u[a.posix.basename(i)];return s?(null==t||t.debug(`Detected known $SHELL '${i}' (${s.shell})`),s):(null==t||t.warning(`Unrecognized $SHELL '${i}', using default ShellConfig instead`),{...u.sh,shell:i})}catch(e){return t&&t.error`Error calculating ShellConfig: ${e}`,{...u.sh,shell:"???"}}}(d,s);let g;if(m.isWindows?(g=await f(d,"echo %USERPROFILE%").catch((e=>e)),null===g&&(g=new Error('No output for "echo %USERPROFILE%"')),"string"==typeof g&&(g=g.trim()),"%USERPROFILE%"===g&&(g=new Error('Non-substituted output for "echo %USERPROFILE%"'))):g=await async function(e,t,n){var r;if(!t.embedSubstitutions)throw new Error(`Shell '${t.shell}' does not support embedding substitutions`);const o=Date.now()%1e5,i=await f(e,`echo ${t.embedSubstitutions`::${"echo "+o}:echo_result:${"echo ~"}:${"echo "+o}::`}`);return(null===(r=null==i?void 0:i.match(`::${o}:echo_result:(.*?):${o}::`))||void 0===r?void 0:r[1])||null}(d,m).catch((e=>e)),"string"!=typeof g){const[i]=(0,t.z0)("CHECK_HOME",!0,o.flags);if(s.error("Could not detect home directory",n.j7),i)throw g&&s.error(g),s.info("If this is expected, disable the CHECK_HOME flag with '-CHECK_HOME':"),s.info("https://github.com/SchoofsKelvin/vscode-sshfs/issues/270"),await e.window.showErrorMessage(`Couldn't detect the home directory for '${r}'`,"Okay"),new Error("Could not detect home directory");g&&s.warning(g),s.warning("The CHECK_HOME flag is disabled, default to '/' and ignore the error"),g=""}s.debug`Home path: ${g}`;const w=(0,l.nr)([],o.environment),[v,E]=(0,t.z0)("REMOTE_COMMANDS",!1,p.flags);if(v){const[e,o]=(0,t.z0)("DEBUG_REMOTE_COMMANDS",!1,p.flags),i=e?` with debug logging enabled by '${o}'`:"";if(s.info`Flag REMOTE_COMMANDS provided in '${E}', setting up command terminal${i}`,m.isWindows)s.error("Windows detected, command terminal is not yet supported",n.j7);else{const t=await this._createCommandTerminal(d,m,r,e);w.push({key:"KELVIN_SSHFS_CMD_PATH",value:t})}}s.debug`Environment: ${w}`;let $=0;const y={config:o,client:d,actualConfig:p,home:g,shellConfig:m,environment:w,terminals:[],filesystems:[],cache:{},pendingUserCount:0,idleTimer:setInterval((()=>{if($=$?$-1:0,!y.pendingUserCount&&(y.filesystems=y.filesystems.filter((e=>!e.closed&&!e.closing)),!y.filesystems.length&&!y.terminals.length))return 1!==$?$=2:void this.closeConnection(y,"Idle with no active filesystems/terminals")}),5e3)};return this.connections.push(y),this.onConnectionAddedEmitter.fire(y),y}async createConnection(e,t){const n=this.getActiveConnection(e,t);if(n)return n;let r=this.pendingConnections[e];return r||(r=[this._createConnection(e,t),t],this.pendingConnections[e]=r,this.onPendingChangedEmitter.fire(),r[0].finally((()=>{delete this.pendingConnections[e],this.onPendingChangedEmitter.fire()}))),r[0]}closeConnection(e,t){const r=this.connections.indexOf(e);-1!==r&&(t=t?`'${t}' as reason`:" no reason given",n.zW.info`Closing connection to '${e.actualConfig.name}' with ${t}`,this.connections.splice(r,1),clearInterval(e.idleTimer),this.onConnectionRemovedEmitter.fire(e),e.client.end())}update(e,t){null==t||t(e),this.onConnectionUpdatedEmitter.fire(e)}}var d=i(4620);function m(e){return e?"string"==typeof e?e:"client"in e?`Connection(${e.actualConfig.name})`:`FileSystemConfig(${e.name})`:"undefined"}class g{constructor(t){this.context=t,this.fileSystems=[],this.creatingFileSystems={},this.connectionManager=new p,e.workspace.onDidChangeWorkspaceFolders((t=>{const{workspaceFolders:n=[]}=e.workspace;t.removed.forEach((async e=>{if("ssh"!==e.uri.scheme)return;if(n.find((t=>t.uri.authority===e.uri.authority)))return;const t=this.fileSystems.find((t=>t.authority===e.uri.authority));t&&t.disconnect()}))}))}async createFileSystem(r,o){var s;const a=this.fileSystems.find((e=>e.authority===r));return a||((s=this.creatingFileSystems)[r]||(s[r]=(0,l.L0)((async(s,a)=>{if(o||(o=(0,t.iE)(r)),!o)throw new Error(`Couldn't find a configuration with the name '${r}'`);const c=await this.connectionManager.createConnection(r,o);this.connectionManager.update(c,(e=>e.pendingUserCount++)),o=c.actualConfig;const{getSFTP:l}=await i.e("14f8").then(i.bind(i,3515)),{SSHFileSystem:h}=await i.e("f1d0").then(i.bind(i,1378)),u=await l(c.client,c.actualConfig),f=new h(r,u,c.actualConfig);n.zW.info`Created SSHFileSystem for ${r}, reading root directory...`,this.connectionManager.update(c,(e=>e.filesystems.push(f))),this.fileSystems.push(f),delete this.creatingFileSystems[r],f.onClose((()=>{this.fileSystems=this.fileSystems.filter((e=>e!==f)),this.connectionManager.update(c,(e=>e.filesystems=e.filesystems.filter((e=>e!==f))))})),e.commands.executeCommand("workbench.files.action.refreshFilesExplorer"),this.connectionManager.update(c,(e=>e.pendingUserCount--));const[p]=(0,t.z0)("CHECK_HOME",!0,o.flags);if(p)try{const t=e.Uri.parse(`ssh://${r}/${c.home}`);if(!((await f.stat(t)).type&e.FileType.Directory))throw e.FileSystemError.FileNotADirectory(t)}catch(t){let o=`Couldn't read the home directory '${c.home}' on the server for SSH FS '${r}', this might be a sign of bad permissions`;if(t instanceof e.FileSystemError&&(o=`The home directory '${c.home}' in SSH FS '${r}' is not a directory, this might be a sign of bad permissions`),n.zW.error(t),"Okay"===await e.window.showWarningMessage(o,"Stop","Ignore"))return a(new Error("User stopped filesystem creation after unaccessible home directory error"))}return s(f)})).catch((t=>{if(!t)throw delete this.creatingFileSystems[r],this.commandDisconnect(r),t;throw n.zW.error`Error while connecting to SSH FS ${r}:\n${t}`,e.window.showErrorMessage(`Error while connecting to SSH FS ${r}:\n${t.message}`,"Retry","Configure","Ignore").then((e=>{delete this.creatingFileSystems[r],"Retry"===e?this.createFileSystem(r).catch((()=>{})):"Configure"===e?this.commandConfigure(o||r):this.commandDisconnect(r)})),t}))))}async createTerminal(t,n,r){const{createTerminal:o}=await Promise.resolve().then(i.bind(i,4620)),s=n&&"client"in n?n:await this.connectionManager.createConnection((null==n?void 0:n.name)||t,n);this.connectionManager.update(s,(e=>e.pendingUserCount++));const a=await o({connection:s,workingDirectory:(null==r?void 0:r.path)||s.actualConfig.root});a.onDidClose((()=>this.connectionManager.update(s,(e=>e.terminals=e.terminals.filter((e=>e!==a)))))),this.connectionManager.update(s,(e=>(e.terminals.push(a),e.pendingUserCount--)));const c=e.window.createTerminal({name:t,pty:a});a.terminal=c,c.show()}getActiveFileSystems(){return this.fileSystems}getFs(e){return this.fileSystems.find((t=>t.authority===e.authority))||null}async promptReconnect(n){const r=(0,t.iE)(n);r&&"Disconnect"===await e.window.showWarningMessage(`SSH FS ${r.label||r.name} disconnected`,"Ignore","Disconnect")&&this.commandDisconnect(n)}provideTasks(e){return[]}async resolveTask(r,o){return new e.Task(r.definition,e.TaskScope.Workspace,`SSH Task '${r.name}'`,"ssh",new e.CustomExecution((async e=>{const{createTerminal:r,createTextTerminal:o}=await Promise.resolve().then(i.bind(i,4620));try{if(!e.host)throw new Error("Missing field 'host' in task description");if(!e.command)throw new Error("Missing field 'command' in task description");const o=await this.connectionManager.createConnection(e.host);e=await(0,d.replaceVariablesRecursive)(e,(e=>(0,d.replaceVariables)(e,o.actualConfig)));let{command:i,workingDirectory:s}=e;const[a]=(0,t.z0)("WINDOWS_COMMAND_SEPARATOR",o.shellConfig.isWindows,o.actualConfig.flags),c=a?" && ":"; ";let{taskCommand:h="$COMMAND"}=o.actualConfig;if(h=(0,l.$R)(h,c),h.includes("$COMMAND"))i=h.replace(/\$COMMAND/g,i);else{const e=`The taskCommand '${h}' is missing the '$COMMAND' placeholder!`;n.zW.warning(e,n.j7),i="echo \"Missing '$COMMAND' placeholder\""}this.connectionManager.update(o,(e=>e.pendingUserCount++));const u=await r({command:i,workingDirectory:s,connection:o});return this.connectionManager.update(o,(e=>(e.pendingUserCount--,e.terminals.push(u)))),u.onDidClose((()=>this.connectionManager.update(o,(e=>e.terminals=e.terminals.filter((e=>e!==u)))))),u}catch(e){return o(`Error: ${e.message||e}`)}})))}provideTerminalLinks(t,n){const{line:r,terminal:o}=t,{creationOptions:i}=o;if(!("pty"in i))return;const{pty:s}=i;if(!(0,d.isSSHPseudoTerminal)(s))return;const a=this.connectionManager.getActiveConnections().find((e=>e.terminals.includes(s)));if(!a)return;const c=[],l=/\/\S+/g;for(;;){const t=l.exec(r);if(!t)break;let[n]=t;n.startsWith("~")&&(n=a.home+n.substring(1));const o=e.Uri.parse(`ssh://${a.actualConfig.name}/${n}`);c.push({uri:o,startIndex:t.index,length:n.length,tooltip:"[SSH FS] Open file"})}return c}async handleTerminalLink(t){t.uri&&await e.window.showTextDocument(t.uri)}async commandConnect(t){n.zW.info`Command received to connect ${t.name}`;const r=e.workspace.workspaceFolders;if(r&&r.find((e=>"ssh"===e.uri.scheme&&e.uri.authority===t.name)))return e.commands.executeCommand("workbench.files.action.refreshFilesExplorer");let{root:o="/"}=t;o.startsWith("~")&&(o=(await this.connectionManager.createConnection(t.name,t)).home+o.substring(1)),o.startsWith("/")&&(o=o.substring(1)),e.workspace.updateWorkspaceFolders(r?r.length:0,0,{uri:e.Uri.parse(`ssh://${t.name}/${o}`),name:`SSH FS - ${t.label||t.name}`})}commandDisconnect(t){let r;n.zW.info`Command received to disconnect ${m(t)}`,"object"==typeof t&&"client"in t?(r=[t],t=t.actualConfig.name):r=this.connectionManager.getActiveConnections().filter((e=>e.actualConfig.name===t));for(const e of r)this.connectionManager.closeConnection(e);const o=this.connectionManager.getActiveConnections().filter((e=>e.actualConfig.name===t));if(o&&o.some((e=>e.filesystems.length)))return;const i=e.workspace.workspaceFolders||[];let s=i.length,a=[];for(const e of i)"ssh"===e.uri.scheme&&e.uri.authority===t?s=Math.min(e.index,s):e.index>s&&a.push(e);i.length!==a.length&&e.workspace.updateWorkspaceFolders(s,i.length-s,...a)}async commandTerminal(t,r){n.zW.info`Command received to open a terminal for ${m(t)}${r?` in ${r}`:""}`;const o="client"in t?t.actualConfig:t;try{await this.createTerminal(o.label||o.name,t,r)}catch(i){n.zW.error`Error while creating terminal:\n${i}`;const s=await e.window.showErrorMessage(`Couldn't start a terminal for ${o.name}: ${i.message||i}`,{title:"Retry"},{title:"Ignore",isCloseAffordance:!0});if(s&&"Retry"===s.title)return this.commandTerminal(t,r)}}async commandConfigure(r){if(n.zW.info`Command received to configure ${"string"==typeof r?r:r.name}`,"object"==typeof r)return r._location||r._locations.length?void this.openSettings({config:r,type:"editconfig"}):void e.window.showErrorMessage("Cannot configure a config-less connection!");r=r.toLowerCase();let o=await(0,t.x3)();if(o=o.filter((e=>e.name===r)),0===o.length)return e.window.showErrorMessage(`Found no matching configs for '${r}'`),n.zW.error`Unexpectedly found no matching configs for '${r}' in commandConfigure?`;const i=1===o.length?o[0]:o;this.openSettings({config:i,type:"editconfig"})}async openSettings(e){const{open:t,navigate:n}=await i.e("5c85").then(i.bind(i,143));return e?n(e):t()}}var w=i(7897);function v(e){const{username:t,host:n,port:r}=e;return`${t?`${t}@`:""}${n}${r?`:${r}`:""}`}function E(t,n){return e.commands.executeCommand("setContext",`sshfs.${t}`,n)}let $;function y(t,n=!1){var r;if("handleInput"in t)return{item:t,contextValue:"terminal",label:`${n?"$(terminal) ":""}${(null===(r=t.terminal)||void 0===r?void 0:r.name)||"Unnamed terminal"}`,iconPath:new e.ThemeIcon("terminal"),command:{title:"Focus",command:"sshfs.focusTerminal",arguments:[t]}};if("client"in t){const{label:r,name:o,group:i}=t.config,s=i?`${i}.${o} `:r&&o,a=v(t.actualConfig);return{item:t,description:s,detail:a,tooltip:a,label:`${n?"$(plug) ":""}${r||o} `,iconPath:new e.ThemeIcon("plug"),collapsibleState:e.TreeItemCollapsibleState.Expanded,contextValue:"connection"}}if("onDidChangeFile"in t){const{label:e,name:r,group:o}=t.config;return{item:t,description:o?`${o}.${r} `:e&&r,contextValue:"filesystem",label:`${n?"$(root-folder) ":""}ssh://${t.authority}/`,iconPath:null==$?void 0:$("resources/icon.svg")}}const{label:o,name:i,group:s,putty:a}=t,c=s?`${s}.${i} `:o&&i,l=!0===a?"PuTTY session (decuded from config)":"string"==typeof a?`PuTTY session '${a}'`:v(t);return{item:t,description:c,detail:l,tooltip:l,contextValue:"config",label:`${n?"$(settings-gear) ":""}${t.label||t.name} `,iconPath:new e.ThemeIcon("settings-gear")}}async function C(t){const n=t?[t.length,t.length]:void 0,r=await e.window.showInputBox({value:t,valueSelection:n,placeHolder:"user@host:/home/user",prompt:"SSH connection string",validateInput(e){const t=(0,w.Xh)(e);return"string"==typeof t?t:void 0}});if(!r)return;const o=(0,w.Xh)(r);return"string"!=typeof o?o[0]:void 0}async function S(n,r){return new Promise((o=>{var i;const{promptConnections:s,promptConfigs:a,nameFilter:c}=r,l=[],h=[];if(s){let e=n.connectionManager.getActiveConnections();"string"==typeof s&&(e=e.filter((e=>e.actualConfig.name===s))),c&&(e=e.filter((e=>e.actualConfig.name===c))),l.push(...e.map((e=>y(e,!0)))),h.push("connection")}if(a){let e=(0,t.G_)();"string"==typeof a&&(e=e.filter((e=>e.name===a))),c&&(e=e.filter((e=>e.name===c))),l.push(...e.map((e=>y(e,!0)))),h.push("configuration")}if(r.promptTerminals){let e=n.connectionManager.getActiveConnections();"string"==typeof s&&(e=e.filter((e=>e.actualConfig.name===s))),c&&(e=e.filter((e=>e.actualConfig.name===c)));const t=e.reduce(((e,t)=>[...e,...t.terminals]),[]);l.push(...t.map((e=>y(e,!0)))),h.push("terminal")}if(r.promptInstantConnection&&l.unshift({label:"$(terminal) Create instant connection",detail:"Opens an input box where you can type e.g. `user@host:22/home/user`",picked:!0,alwaysShow:!0,item:C}),r.immediateReturn&&l.length<=1)return o(null===(i=l[0])||void 0===i?void 0:i.item);const u=e.window.createQuickPick();u.items=l,u.title="Select "+h.join(" / "),u.onDidAccept((()=>{var e;let t=null===(e=u.activeItems[0])||void 0===e?void 0:e.item;u.hide(),"function"==typeof t&&(t=t(u.value)),o(t)})),u.onDidHide((()=>o(void 0))),u.show()}))}class b{constructor(t){this.manager=t,this.onDidChangeTreeDataEmitter=new e.EventEmitter,this.onDidChangeTreeData=this.onDidChangeTreeDataEmitter.event,t.onConnectionAdded((()=>this.onDidChangeTreeDataEmitter.fire())),t.onConnectionRemoved((()=>this.onDidChangeTreeDataEmitter.fire())),t.onConnectionUpdated((e=>this.onDidChangeTreeDataEmitter.fire(e)))}refresh(){this.onDidChangeTreeDataEmitter.fire()}getTreeItem(t){if("onDidChangeFile"in t||"handleInput"in t)return{...y(t),collapsibleState:e.TreeItemCollapsibleState.None};if(Array.isArray(t)){const[n,r]=t;return r?{...y(r),contextValue:"pendingconnection",collapsibleState:e.TreeItemCollapsibleState.Collapsed,iconPath:new e.ThemeIcon("loading~spin")}:{label:n,description:"Connecting..."}}return{...y(t),collapsibleState:e.TreeItemCollapsibleState.Collapsed}}getChildren(e){return e?"onDidChangeFile"in e||"handleInput"in e||Array.isArray(e)?[]:[...e.terminals,...e.filesystems]:[...this.manager.getActiveConnections(),...this.manager.getPendingConnections()]}}class T{constructor(){this.onDidChangeTreeDataEmitter=new e.EventEmitter,this.onDidChangeTreeData=this.onDidChangeTreeDataEmitter.event,t.g3.push((()=>this.onDidChangeTreeDataEmitter.fire()))}getTreeItem(t){return"string"==typeof t?{label:t.replace(/^.+\./,""),contextValue:"group",collapsibleState:e.TreeItemCollapsibleState.Collapsed,iconPath:e.ThemeIcon.Folder}:{...y(t),collapsibleState:e.TreeItemCollapsibleState.None}}getChildren(e=""){if("string"!=typeof e)return[];const n=(0,t.G_)(),r=n.filter((({group:t})=>(t||"")===e));r.sort(((e,t)=>e.name>t.name?1:-1));let o=(0,w.jA)(n,!0);return o=e?o.filter((t=>t.startsWith(e)&&"."===t[e.length]&&!t.includes(".",e.length+1))):o.filter((e=>!e.includes("."))),[...r,...o.sort()]}}function k(){var t;const n=e.extensions.getExtension("Kelvin.vscode-sshfs");return null===(t=null==n?void 0:n.packageJSON)||void 0===t?void 0:t.version}async function R(r){var i;n.zW.info`Extension activated, version ${k()}, mode ${r.extensionMode}`,n.zW.debug`Running VS Code version ${e.version} ${process.versions}`,(0,n.ew)("true"===(null===(i=process.env.VSCODE_SSHFS_DEBUG)||void 0===i?void 0:i.toLowerCase()));const s=r.globalState.get("lastVersion");var a;r.globalState.update("lastVersion",k()),s?s!==k()&&n.zW.info`Previously used version ${s}, first run after install.`:n.zW.info("No previous version detected. Fresh or pre-v1.21.0 installation?"),a=r.asAbsolutePath.bind(r),$=a;try{await(0,t.O1)()}catch(e){n.zW.error`Could not load configs: ${e}`}const c=new g(r),l=r.subscriptions.push.bind(r.subscriptions),h=(t,n,r)=>l(e.commands.registerCommand(t,n,r));l(e.workspace.registerFileSystemProvider("ssh",new o(c),{isCaseSensitive:!0})),l(e.window.createTreeView("sshfs-configs",{treeDataProvider:new T,showCollapseAll:!0}));const u=new b(c.connectionManager);function f(t,r){h(t,(async o=>{var i,s,a,l,h;return!r.promptOptions||o&&"string"!=typeof o||(o=await S(c,{...r.promptOptions,nameFilter:o})),"string"==typeof o?null===(i=r.handleString)||void 0===i?void 0:i.call(r,o):o?o instanceof e.Uri?null===(s=r.handleUri)||void 0===s?void 0:s.call(r,o):"handleInput"in o?null===(a=r.handleTerminal)||void 0===a?void 0:a.call(r,o):"client"in o?null===(l=r.handleConnection)||void 0===l?void 0:l.call(r,o):"name"in o?null===(h=r.handleConfig)||void 0===h?void 0:h.call(r,o):void n.zW.warning(`CommandHandler for '${t}' could not handle input '${o}'`):void 0}))}l(e.window.createTreeView("sshfs-connections",{treeDataProvider:u,showCollapseAll:!0})),l(e.tasks.registerTaskProvider("ssh-shell",c)),l(e.window.registerTerminalLinkProvider(c)),function(e){async function t(){const t=e.getActiveConnections(),n=e.getPendingConnections();await E("openConnections",t.length+n.length),await E("openTerminals",t.reduce(((e,t)=>e+t.terminals.length),0)),await E("openFileSystems",t.reduce(((e,t)=>e+t.filesystems.length),0))}e.onConnectionAdded(t),e.onConnectionRemoved(t),e.onConnectionUpdated(t),e.onPendingChanged(t),t()}(c.connectionManager),h("sshfs.new",(()=>c.openSettings({type:"newconfig"}))),f("sshfs.add",{promptOptions:{promptConfigs:!0,promptConnections:!0,promptInstantConnection:!0},handleConfig:e=>c.commandConnect(e)}),f("sshfs.disconnect",{promptOptions:{promptConnections:!0},handleString:e=>c.commandDisconnect(e),handleConfig:e=>c.commandDisconnect(e.name),handleConnection:e=>c.commandDisconnect(e)}),h("sshfs.disconnectAll",(()=>{const e=c.connectionManager;e.getActiveConnections().forEach((t=>e.closeConnection(t,"command:disconnectAll")))})),f("sshfs.terminal",{promptOptions:{promptConfigs:!0,promptConnections:!0,promptInstantConnection:!0},handleConfig:e=>c.commandTerminal(e),handleConnection:e=>c.commandTerminal(e),handleUri:async e=>{const t=await((e,t)=>S(e,{promptConnections:t||!0,immediateReturn:!!t}))(c,e.authority);t&&c.commandTerminal(t,e)}}),f("sshfs.focusTerminal",{promptOptions:{promptTerminals:!0},handleTerminal:({terminal:e})=>null==e?void 0:e.show(!1)}),f("sshfs.closeTerminal",{promptOptions:{promptTerminals:!0},handleTerminal:e=>e.close()}),f("sshfs.configure",{promptOptions:{promptConfigs:!0},handleConfig:e=>c.commandConfigure(e)}),h("sshfs.reload",t.O1),h("sshfs.settings",(()=>c.openSettings())),h("sshfs.refresh",(()=>u.refresh()))}})(),module.exports=s})();
//# sourceMappingURL=extension.js.map